{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){},45:function(e,t,n){\"use strict\";n.r(t);var c=n(2),a=n(18),r=n.n(a),s=(n(24),n(4)),u=n.n(s),i=n(19),o=n(7),j=n(9),l=n(8),p=n.n(l),b=n(0),f=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(\"\"),s=Object(j.a)(r,2),l=s[0],f=s[1],d=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(\"http://localhost:5000/get-messages\");case 3:return t=e.sent,n=t.data,a((function(e){return[n].concat(Object(i.a)(e))})),e.next=8,d();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),setTimeout((function(){d()}),500);case 13:case\"end\":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){d()}),[]);var h=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(\"http://localhost:5000/new-messages\",{message:l,id:Date.now()});case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(\"div\",{className:\"center\",children:Object(b.jsxs)(\"div\",{children:[Object(b.jsxs)(\"div\",{className:\"form\",children:[Object(b.jsx)(\"input\",{value:l,onChange:function(e){return f(e.target.value)},type:\"text\"}),Object(b.jsx)(\"button\",{onClick:h,children:\"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u0438\\u0442\\u044c\"})]}),Object(b.jsx)(\"div\",{className:\"messages\",children:n.map((function(e){return Object(b.jsx)(\"div\",{className:\"message\",children:e.message},e.id)}))})]})})};var d=function(){return Object(b.jsx)(\"div\",{children:Object(b.jsx)(f,{})})};r.a.render(Object(b.jsx)(d,{}),document.getElementById(\"root\"))}},[[45,1,2]]]);","name":"static/js/main.de399870.chunk.js","map":{"version":3,"sources":["static/js/main.de399870.chunk.js"],"names":["this","push","24","module","exports","__webpack_require__","45","__webpack_exports__","r","react","react_dom","react_dom_default","n","regenerator","regenerator_default","toConsumableArray","asyncToGenerator","slicedToArray","axios","axios_default","jsx_runtime","src_LongPulling","_useState","Object","_useState2","messages","setMessages","_useState3","_useState4","value","setValue","subscribe","_ref","a","mark","_callee","_yield$axios$get","data","wrap","_context","prev","next","get","sent","concat","t0","setTimeout","stop","apply","arguments","sendMessage","_ref2","_callee2","_context2","post","message","id","Date","now","className","children","onChange","e","target","type","onClick","map","mess","src_App","render","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(18);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/app.css\nvar app = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(4);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(8);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/LongPulling.jsx\nvar LongPulling_LongPulling=function LongPulling(){var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),value=_useState4[0],setValue=_useState4[1];var subscribe=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _yield$axios$get,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios_default.a.get('http://localhost:5000/get-messages');case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setMessages(function(prev){return[data].concat(Object(toConsumableArray[\"a\" /* default */])(prev));});// и снова подписываемя на событие\n_context.next=8;return subscribe();case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);setTimeout(function(){subscribe();},500);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function subscribe(){return _ref.apply(this,arguments);};}();Object(react[\"useEffect\"])(function(){subscribe();},[]);var sendMessage=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios_default.a.post('http://localhost:5000/new-messages',{message:value,id:Date.now()});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function sendMessage(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"form\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:value,onChange:function onChange(e){return setValue(e.target.value);},type:\"text\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:sendMessage,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"messages\",children:messages.map(function(mess){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"message\",children:mess.message},mess.id);})})]})});};/* harmony default export */ var src_LongPulling = (LongPulling_LongPulling);\n// CONCATENATED MODULE: ./src/App.js\n// import EventSourcing from \"./EventSourcing\";\n// import WebSock from \"./WebSock\";\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_LongPulling,{})});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));\n\n/***/ })\n\n},[[45,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\Teacher\\Documents\\GitHub\\typesExpress\\client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Teacher\\Documents\\GitHub\\typesExpress\\client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Teacher\\Documents\\GitHub\\typesExpress\\client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Teacher\\Documents\\GitHub\\typesExpress\\client\\src\\app.css","C:/Users/Teacher/Documents/GitHub/typesExpress/client/src/LongPulling.jsx","C:/Users/Teacher/Documents/GitHub/typesExpress/client/src/App.js","C:/Users/Teacher/Documents/GitHub/typesExpress/client/src/index.js"],"names":["LongPulling","useState","messages","setMessages","value","setValue","subscribe","axios","get","data","prev","setTimeout","useEffect","sendMessage","post","message","id","Date","now","e","target","map","mess","App","ReactDOM","render","document","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGA,GAAMA,wBAAW,CAAG,QAAdA,YAAc,EAAM,eACUC,yBAAQ,CAAC,EAAD,CADlB,kEACfC,QADe,eACLC,WADK,8BAEIF,yBAAQ,CAAC,EAAD,CAFZ,mEAEfG,KAFe,eAERC,QAFQ,eAKtB,GAAMC,UAAS,sHAAG,qMAEaC,gBAAK,CAACC,GAAN,CAAU,oCAAV,CAFb,uCAEFC,IAFE,kBAEFA,IAFE,CAGVN,WAAW,CAAC,SAAAO,IAAI,SAAKD,IAAL,sDAAcC,IAAd,IAAL,CAAX,CACA;AAJU,sBAKJJ,UAAS,EALL,yFAOVK,UAAU,CAAC,UAAM,CACbL,SAAS,GACZ,CAFS,CAEP,GAFO,CAAV,CAPU,qEAAH,kBAATA,UAAS,0CAAf,CAaAM,0BAAS,CAAC,UAAM,CACZN,SAAS,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMO,YAAW,uHAAG,iKACVN,gBAAK,CAACO,IAAN,CAAW,oCAAX,CAAiD,CACnDC,OAAO,CAAEX,KAD0C,CAEnDY,EAAE,CAAEC,IAAI,CAACC,GAAL,EAF+C,CAAjD,CADU,yDAAH,kBAAXL,YAAW,2CAAjB,CAOA,mBACI,kCAAK,SAAS,CAAC,QAAf,uBACI,0DACI,mCAAK,SAAS,CAAC,MAAf,wBACI,oCAAO,KAAK,CAAET,KAAd,CAAqB,QAAQ,CAAE,kBAAAe,CAAC,QAAId,SAAQ,CAACc,CAAC,CAACC,MAAF,CAAShB,KAAV,CAAZ,EAAhC,CAA8D,IAAI,CAAC,MAAnE,EADJ,cAEI,qCAAQ,OAAO,CAAES,WAAjB,oEAFJ,GADJ,cAKI,kCAAK,SAAS,CAAC,UAAf,UACKX,QAAQ,CAACmB,GAAT,CAAa,SAAAC,IAAI,qBACd,kCAAK,SAAS,CAAC,SAAf,UACKA,IAAI,CAACP,OADV,EAA8BO,IAAI,CAACN,EAAnC,CADc,EAAjB,CADL,EALJ,GADJ,EADJ,CAiBH,CA9CD,CAgDehB,2EAAf,E;;AChDA;AACA;AAEA,QAASuB,IAAT,EAAe,CAEb,mBACI,wDACE,2BAAC,eAAD,IADF,EADJ,CAKD,CAGcA,+CAAf,E;;ACZAC,mBAAQ,CAACC,MAAT,cACI,2BAAC,OAAD,IADJ,CAEEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAFF,E","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\n\r\nconst LongPulling = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [value, setValue] = useState('');\r\n\r\n\r\n    const subscribe = async () => {\r\n        try {\r\n            const { data } = await axios.get('http://localhost:5000/get-messages')\r\n            setMessages(prev => [data, ...prev])\r\n            // и снова подписываемя на событие\r\n            await subscribe()\r\n        } catch (e) {\r\n            setTimeout(() => {\r\n                subscribe()\r\n            }, 500)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        subscribe()\r\n    }, [])\r\n\r\n    const sendMessage = async () => {\r\n        await axios.post('http://localhost:5000/new-messages', {\r\n            message: value,\r\n            id: Date.now()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"center\">\r\n            <div>\r\n                <div className=\"form\">\r\n                    <input value={value} onChange={e => setValue(e.target.value)} type=\"text\" />\r\n                    <button onClick={sendMessage}>Отправить</button>\r\n                </div>\r\n                <div className=\"messages\">\r\n                    {messages.map(mess =>\r\n                        <div className=\"message\" key={mess.id}>\r\n                            {mess.message}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LongPulling;","import React from 'react';\r\nimport './app.css'\r\nimport LongPulling from \"./LongPulling\";\r\n// import EventSourcing from \"./EventSourcing\";\r\n// import WebSock from \"./WebSock\";\r\n\r\nfunction App() {\r\n\r\n  return (\r\n      <div>\r\n        <LongPulling/>\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);"]}}